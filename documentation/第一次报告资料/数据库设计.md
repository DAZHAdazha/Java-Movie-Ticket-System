# 数据库设计

业务层主要使用MySQL数据

### 1.数据需求

（1）影片信息：电影名称、导演、演员、电影简介、语言、片场（分钟）、放映日期、价格、票数、作为编号（1-300）、海报、硬座数量、软座数量、情侣座数量、电影类别

（2）座位信息：座位类别、座位票价、座位编号

（3）折扣信息：折扣类型

（4）订票信息：电影名称、放映日期、放映时间、放映大厅、座位号、票价（单价）、折后价格、订票数量、票数总价、折扣类型

（5）登记类型：用户类型、用户名、用户密码、姓名、性别

（6）电影类型：电影类型

（7）会员信息：会员类型、会员折扣、会员姓名、会员身份证号码、会员联系电话

（8）会员类型：会员类型

（9）放映时间：放映时间、放映大厅

（10）放映大厅：放映大厅编号

### 2.主干业务表设计

（1）films(电影信息表)

| 键名           | 含义            | 类型            | 长度 | 取值范围 |
| -------------- | --------------- | --------------- | ---- | -------- |
| IMDBid（主键） | IMDB影库影片id  | VARCHAR(36)     | 36   |          |
| FFilmName      | 电影名称        | Navarchar(30)   | 50   |          |
| FDire          | 导演            | Navarchar(30)   | 30   |          |
| Fplayer        | 主演            | Navarchar(200)  | 200  |          |
| FIntro         | 简介            | Navarchar(1000) | 1000 |          |
| Flanguage      | 音轨语言        | Nvarchar(10)    | 10   |          |
| FTime          | 时常（sec）     | BIGINT          | 8    | 2^63-1   |
| FDate          | 上映日期        | Date            | 50   |          |
| Fprice         | 票房票价        | Float           | 4    | 0-32767  |
| FNum           | 计划销量        | int             | 4    | 0-32767  |
| Fpicurl        | 海报图链接      | VARCHAR(50)     | 50   |          |
| LTIME          | 上映时间（sec） | int             | 4    | 0-32767  |


​	  

(2) halls(影厅表)

| 键名   | 含义     | 类型 | 长度 | 取值范围    |
| ------ | -------- | ---- | ---- | ----------- |
| HID    | 影厅序号 | int  | 4    | 0-32767     |
| HType  | 影厅类别 | int  | 4    | 0-32767     |
| HSeats | 座位数   | int  | 4    | 0-32767 |

(3) Seats

| 键名   | 含义     | 类型 | 长度 | 取值范围    |
| ------ | -------- | ---- | ---- | ----------- |
| SID  | 座位序号 | int  | 4  | 0-32767 |
| Stype | 座位类别 | int          | 4   | 0-32767 |
| Shall | 座位所在厅 | int | 4 | 0-32767 |

（4）User（用户状态表）

| 键名   | 含义     | 类型 | 长度 | 取值范围    |
| ---- | ---- | ---- | ---- | ---- |
| UID | 用户ID | CHAR(60) | 60 |      |
| Utoken | 用户登录鉴权状态 | bool |      |      |

（5）Seals （订票信息）

| 键名   | 含义     | 类型 | 长度 | 取值范围    |
| ---- | ---- | ---- | ---- | ---- |
| Tid | 订单号          | BIGINT | 8 | 2^63-1 |
| TImdb | 电影uuid | VARCHAR(36) | 36 |  |
| Ttime | 开映时间（sec） | BIGINT      | 8    | 2^63-1 |
| TSeat | 订单座位 | int | 4 | 0-32767 |
| Tuid | 用户ID | CHAR(60) |   60   |      |
| Tpay | 实付票价 | FLOAT | 4 | 0-1000. |
| Tmethod | 售票渠道 | int | 4 | 0-32767 |
| Taccount | 折扣 | float | 4 | 0-1 |


